#Install AVR tools
#Installing avra
yay --editmenu -S avra
#wait for various prompts, choose avra-git, edit the PKGBUILD using nano and add 'aarch64' in the build architecture

#Install avr-gcc on termuxarch
startarch
pacman -Sy avrdude avr-gcc avr-libc 
#End avr-gcc installation termuxarch


#Arduino IDE
#Install platformio on termuxarch
pacman -S python python-pip
pip install platformio
#Follow instructions on platformio website for installing avr toolchain

#cd to the src directory
#modify main.cpp for the code
#go outside the source director
pio run -e uno
cd /data/data/com.termux/files/home/storage/shared/tlc/resources/termux/avr/pio_codes/.pioenvs/uno
#where pio_codes is the main directory
#Flash the firmware.hex file using avrdude

#End platformio installation on termuxarch


#Turning LED on and off using avra
#logon to the pi using ssh
ssh pi@10.0.0.8
sudo apt install ser2net
#Connect the arduino to the pi
lsusb
dmesg | tail
#you should see something like /dev/ttyACM0 


#Open a terminal in termux
ssh -tt -n -L 8086:localhost:8086 pi@10.0.0.8 '/usr/sbin/ser2net -d -C "8086:raw:600:/dev/ttyACM0:115200 NONE 1STOPBIT 8DATABITS -XONXOFF LOCAL -RTSCTS HANGUP_WHEN_DONE "' 
#Modify the ip address 10.0.0.8 and the port /dev/ttyACM0 if necessary

#Open another terminal on termux
avra hello.asm
avrdude -p atmega328p -c arduino -P net:localhost:8086 -U flash:w:hello.hex
#On successful execution, pin 13 on the arduino should either be on or off
nano hello.asm
#You should see the following two lines
  ldi r17,0b00100000
;  ldi r17,0b00000000
#; represents comment in asm.  Execute one of the above alternately. In one case the LED switches on, in another case
it becomes off.
